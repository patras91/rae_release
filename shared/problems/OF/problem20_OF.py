__author__ = 'mason'
from domain_orderFulfillment import *
from timer import DURATION
from state import state
import numpy as np

def GetCostOfMove(r, loc1, loc2, dist):
    return 1 + dist

def GetCostOfLookup(item):
    return max(1, np.random.beta(2, 2))

def GetCostOfWrap(m, item):
    return max(1, np.random.normal(5, .5))

def GetCostOfPickup(r, item):
    return max(1, np.random.normal(4, 1))

def GetCostOfPutdown(r, item):
    return max(1, np.random.normal(4, 1))

def GetCostOfLoad(r, m, item):
    return max(1, np.random.normal(3, .5))

DURATION.TIME = {
    'lookupDB': GetCostOfLookup,
    'wrap': GetCostOfWrap,
    'pickup': GetCostOfPickup,
    'putdown': GetCostOfPutdown,
    'acquireRobot': 1,
    'freeRobot': 1,
    'loadMachine': GetCostOfLoad,
    'moveRobot': GetCostOfMove,
    'repair': 8,
    'wait': 1
}

DURATION.COUNTER = {
    'lookupDB': GetCostOfLookup,
    'wrap': GetCostOfWrap,
    'pickup': GetCostOfPickup,
    'putdown': GetCostOfPutdown,
    'acquireRobot': 1,
    'freeRobot': 1,
    'loadMachine': GetCostOfLoad,
    'moveRobot': GetCostOfMove,
    'repair': 8,
    'wait': 1
}

rv.LOCATIONS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 200]
rv.FACTORY1 = frozenset({0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27})
rv.FACTORY_UNION = rv.FACTORY1
rv.SHIPPING_DOC = {rv.FACTORY1: 5}

rv.GROUND_EDGES = {0: [4, 5, 6, 17, 19, 21, 23, 27, 200], 1: [22, 24], 2: [22, 15, 17, 25], 3: [6, 14, 27, 8], 4: [0, 9, 16], 5: [0, 25, 200], 6: [0, 3, 11, 12, 16, 21], 7: [13, 15, 26, 9, 16], 8: [3, 9, 26, 10, 14, 18, 25], 9: [4, 7, 23, 24, 8, 18], 10: [8, 15, 21, 25], 11: [6, 15, 16, 27], 12: [6, 14, 15], 13: [17, 7], 14: [8, 23, 3, 12, 200], 15: [2, 12, 7, 10, 11, 26, 200], 16: [4, 6, 7, 17, 11], 17: [0, 2, 16, 21, 13], 18: [8, 9], 19: [0, 22, 27], 20: [26, 24], 21: [0, 6, 10, 17], 22: [1, 19, 2], 23: [0, 9, 14, 200], 24: [1, 20, 9, 200], 25: [2, 5, 8, 10], 26: [15, 7, 8, 20], 27: [0, 19, 3, 11], 200: [0, 5, 14, 15, 23, 24]}
rv.GROUND_WEIGHTS = {(0, 4): 12.779917698971353, (0, 5): 2.641953650547599, (0, 6): 3.8325530912186467, (0, 17): 11.685050793174796, (0, 19): 9.412361484041732, (0, 21): 10.203358325535943, (0, 23): 8.721061891610502, (0, 27): 3.396462165494647, (0, 200): 1, (1, 22): 7.176321967123522, (1, 24): 17.502791562950275, (2, 22): 9.53373279646522, (2, 15): 3.3525978643984633, (2, 17): 6.101986460172948, (2, 25): 6.530692968307648, (3, 6): 4.939787289947998, (3, 14): 3.218156543983259, (3, 27): 1, (3, 8): 14.097702236321723, (4, 9): 8.72819225150019, (4, 16): 6.896331086785448, (5, 25): 10.718382615592173, (5, 200): 13.061960089620507, (6, 11): 7.349653184494064, (6, 12): 7.742137816754474, (6, 16): 4.742029995809381, (6, 21): 7.788371405209777, (7, 13): 8.044011399165086, (7, 15): 12.70170838634209, (7, 26): 5.79151547034829, (7, 9): 7.101324558406776, (7, 16): 2.3882936237581163, (8, 9): 6.00902880733537, (8, 26): 7.482353274208285, (8, 10): 8.985512246428458, (8, 14): 8.746859653224778, (8, 18): 12.468085483600902, (8, 25): 14.221905944709949, (9, 23): 5.5294847584259745, (9, 24): 3.928348129039124, (9, 18): 5.715657757667647, (10, 15): 9.064133519288323, (10, 21): 7.842003631276904, (10, 25): 3.839405585736534, (11, 15): 7.05435482410004, (11, 16): 8.084096274921716, (11, 27): 9.40940548830768, (12, 14): 4.070164669688957, (12, 15): 6.795917485228909, (13, 17): 9.214686206953946, (14, 23): 8.126716318722256, (14, 200): 14.79461254753778, (15, 26): 12.32987866609843, (15, 200): 5.315587392359369, (16, 17): 7.8781693735006755, (17, 21): 9.37095347581784, (19, 22): 7.006264777929362, (19, 27): 12.080020171807494, (20, 26): 9.694214043263308, (20, 24): 1, (23, 200): 4.73346831692994, (24, 200): 12.573261662190708}

rv.ROBOTS = { 'r0': rv.FACTORY1,  'r1': rv.FACTORY1,  'r2': rv.FACTORY1,  'r3': rv.FACTORY1,  'r4': rv.FACTORY1,  'r5': rv.FACTORY1,  'r6': rv.FACTORY1,  'r7': rv.FACTORY1, }
rv.ROBOT_CAPACITY = {'r0': 9.357894053495409, 'r1': 9.656726530626626, 'r2': 7.14852462232849, 'r3': 7.04955064980815, 'r4': 8.915522470467552, 'r5': 5.224291224276918, 'r6': 5.932613478847626, 'r7': 12.796807761996163}
rv.MACHINES = { 'm0': rv.FACTORY1,  'm1': rv.FACTORY1,  'm2': rv.FACTORY1,  'm3': rv.FACTORY1,  'm4': rv.FACTORY1,  'm5': rv.FACTORY1,  'm6': rv.FACTORY1,  'm7': rv.FACTORY1,  'm8': rv.FACTORY1,  'm9': rv.FACTORY1,  'm10': rv.FACTORY1,  'm11': rv.FACTORY1, }
rv.REPAIR_BOT = ['fixer0']

rv.OBJECTS = ['o0', 'o1', 'o2', 'o3', 'o4', 'o5', 'o6', 'o7', 'o8', 'o9', 'o10', 'o11', 'o12', 'o13', 'o14', 'o15', 'o16', 'o17', 'o18', 'o19', 'o20', 'o21', 'o22', 'o23', 'o24', 'o25', 'o26']
rv.OBJ_WEIGHT = {'o0': 8.280139109068863, 'o1': 9.07237319659406, 'o2': 7.809101357246253, 'o3': 8.633529942558447, 'o4': 3.14421746622305, 'o5': 6.9665404615718876, 'o6': 6.63648495693566, 'o7': 7.957746130824109, 'o8': 5.295048469542557, 'o9': 5.526591620206566, 'o10': 6.918882742055002, 'o11': 8.885613523831342, 'o12': 3.4482002460689825, 'o13': 4.542040642071424, 'o14': 8.629604694188897, 'o15': 2.4568706496222807, 'o16': 6.886964655771544, 'o17': 5.755991523718912, 'o18': 0.7424227161041088, 'o19': 8.210219696178628, 'o20': 7.641598016655188, 'o21': 10.7119000660228, 'o22': 7.307891788368307, 'o23': 7.074997076275879, 'o24': 4.7905273800146935, 'o25': 8.324335219122105, 'o26': 4.435731217187957}
rv.OBJ_CLASS = {'type0': ['o0', 'o1', 'o2', 'o3', 'o4', 'o5', 'o6', 'o7'], 'type1': ['o8', 'o9', 'o10', 'o11', 'o12', 'o13'], 'type2': ['o14'], 'type3': ['o15', 'o16', 'o17', 'o18', 'o19', 'o20', 'o21'], 'type4': ['o22', 'o23', 'o24', 'o25', 'o26']}

def ResetState():
    state.loc = { 'r0': 23, 'r1': 9, 'r2': 5, 'r3': 27, 'r4': 25, 'r5': 11, 'r6': 16, 'r7': 6, 'm0': 6, 'm1': 7, 'm2': 20, 'm3': 25, 'm4': 9, 'm5': 16, 'm6': 23, 'm7': 5, 'm8': 0, 'm9': 25, 'm10': 24, 'm11': 12, 'fixer0': 16, 'o0': UNK, 'o1': UNK, 'o2': UNK, 'o3': UNK, 'o4': UNK, 'o5': UNK, 'o6': UNK, 'o7': UNK, 'o8': UNK, 'o9': UNK, 'o10': UNK, 'o11': UNK, 'o12': UNK, 'o13': UNK, 'o14': UNK, 'o15': UNK, 'o16': UNK, 'o17': UNK, 'o18': UNK, 'o19': UNK, 'o20': UNK, 'o21': UNK, 'o22': UNK, 'o23': UNK, 'o24': UNK, 'o25': UNK, 'o26': UNK,}
    state.storedLoc = {'o0': 14, 'o1': 25, 'o2': 23, 'o3': 4, 'o4': 7, 'o5': 8, 'o6': 11, 'o7': 10, 'o8': 27, 'o9': 13, 'o10': 11, 'o11': 9, 'o12': 8, 'o13': 1, 'o14': 18, 'o15': 21, 'o16': 8, 'o17': 13, 'o18': 7, 'o19': 8, 'o20': 21, 'o21': 23, 'o22': 16, 'o23': 26, 'o24': 8, 'o25': 15, 'o26': 25}
    state.load = { 'r0': NIL, 'r1': NIL, 'r2': NIL, 'r3': NIL, 'r4': NIL, 'r5': NIL, 'r6': NIL, 'r7': NIL, 'fixer0': False,}
    state.busy = {'r0': False, 'r1': False, 'r2': False, 'r3': False, 'r4': False, 'r5': False, 'r6': False, 'r7': False, 'm0': False, 'm1': False, 'm2': False, 'm3': False, 'm4': False, 'm5': False, 'm6': False, 'm7': False, 'm8': False, 'm9': False, 'm10': False, 'm11': False, 'fixer0': False}
    state.numUses = {'m0': 7, 'm1': 7, 'm2': 7, 'm3': 9, 'm4': 11, 'm5': 11, 'm6': 11, 'm7': 10, 'm8': 12, 'm9': 12, 'm10': 12, 'm11': 12}
    state.var1 = {'temp': 'r0', 'temp1': 'r0', 'temp2': 1, 'shouldRedo': False}

tasks = {
    16: [['order', 'type0', 200]],
    8: [['order', 'type0', 200]],
}
eventsEnv = {
}