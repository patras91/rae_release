__author__ = 'mason'
from domain_orderFulfillment import *
from timer import DURATION
from state import state
import numpy as np

def GetCostOfMove(r, loc1, loc2, dist):
    return 1 + dist

def GetCostOfLookup(item):
    return max(1, np.random.beta(2, 2))

def GetCostOfWrap(m, item):
    return max(1, np.random.normal(5, .5))

def GetCostOfPickup(r, item):
    return max(1, np.random.normal(4, 1))

def GetCostOfPutdown(r, item):
    return max(1, np.random.normal(4, 1))

def GetCostOfLoad(r, m, item):
    return max(1, np.random.normal(3, .5))

DURATION.TIME = {
    'lookupDB': GetCostOfLookup,
    'wrap': GetCostOfWrap,
    'pickup': GetCostOfPickup,
    'putdown': GetCostOfPutdown,
    'acquireRobot': 1,
    'freeRobot': 1,
    'loadMachine': GetCostOfLoad,
    'moveRobot': GetCostOfMove,
    'repair': 8,
    'wait': 1
}

DURATION.COUNTER = {
    'lookupDB': GetCostOfLookup,
    'wrap': GetCostOfWrap,
    'pickup': GetCostOfPickup,
    'putdown': GetCostOfPutdown,
    'acquireRobot': 1,
    'freeRobot': 1,
    'loadMachine': GetCostOfLoad,
    'moveRobot': GetCostOfMove,
    'repair': 8,
    'wait': 1
}

rv.LOCATIONS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 200]
rv.FACTORY1 = frozenset({0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25})
rv.FACTORY_UNION = rv.FACTORY1
rv.SHIPPING_DOC = {rv.FACTORY1: 2.2744840675518656}

rv.GROUND_EDGES = {0: [2, 7, 9, 10, 16, 17, 3, 6, 12, 13], 1: [4, 9, 13, 11, 14, 16], 2: [11, 12, 14, 0, 16, 19], 3: [0, 18], 4: [20, 1, 18], 5: [8, 9, 14, 16, 18], 6: [0, 10], 7: [17, 18, 0], 8: [15, 5, 23], 9: [24, 0, 1, 5, 13, 21], 10: [6, 0, 200], 11: [1, 2, 19], 12: [0, 2, 17, 23], 13: [0, 9, 1, 23, 200], 14: [1, 2, 5, 20], 15: [20, 24, 25, 8], 16: [1, 2, 5, 0], 17: [12, 0, 7], 18: [3, 4, 5, 24, 7, 21], 19: [2, 11, 24, 23], 20: [14, 4, 15], 21: [9, 18, 22, 24, 25], 22: [24, 21], 23: [8, 12, 13, 19], 24: [9, 15, 18, 19, 21, 22], 25: [21, 15], 200: [10, 13]}
rv.GROUND_WEIGHTS = {(0, 2): 7.446947120891572, (0, 7): 4.099584182946411, (0, 9): 5.640789130359121, (0, 10): 1.2787298774592637, (0, 16): 15.629139835884033, (0, 17): 8.498208107159986, (0, 3): 11.173069890115789, (0, 6): 4.26450008293517, (0, 12): 7.882069863382907, (0, 13): 14.935740331727366, (1, 4): 8.24130436950496, (1, 9): 7.984762015633892, (1, 13): 4.547851535227929, (1, 11): 5.440015585131678, (1, 14): 11.39461617121454, (1, 16): 2.784585603766039, (2, 11): 14.410643796093517, (2, 12): 7.691324630381472, (2, 14): 2.6549574579512143, (2, 16): 1, (2, 19): 2.4303251000945654, (3, 18): 5.538384290143737, (4, 20): 9.664370206488714, (4, 18): 8.219615722167287, (5, 8): 5.686435736619441, (5, 9): 10.57126195702223, (5, 14): 10.30458813691641, (5, 16): 12.963399299137835, (5, 18): 2.8251094661202805, (6, 10): 9.255935772938113, (7, 17): 10.603115352270976, (7, 18): 11.828864552311988, (8, 15): 8.818968087907361, (8, 23): 9.936162442645834, (9, 24): 13.355799325288565, (9, 13): 10.829700053808134, (9, 21): 1.165377922094338, (10, 200): 6.572611758318866, (11, 19): 9.493727128604673, (12, 17): 4.158335826399616, (12, 23): 10.116113122552411, (13, 23): 8.738701761315346, (13, 200): 5.799510253988645, (14, 20): 8.630579229333327, (15, 20): 5.111790472519586, (15, 24): 1, (15, 25): 7.043791338694384, (18, 24): 2.317912746068134, (18, 21): 1, (19, 24): 9.79215016593323, (19, 23): 11.096669611794088, (21, 22): 9.905645360271667, (21, 24): 12.401516625950656, (21, 25): 6.877619079630067, (22, 24): 9.053125067482823}

rv.ROBOTS = ['r0', 'r1', 'r2', 'r3', 'r4', 'r5', 'r6', 'r7']
rv.ROBOT_CAPACITY = {'r0': 7.633099731639602, 'r1': 6.2762258131401065, 'r2': 7.403021189139212, 'r3': 6.033736628931149, 'r4': 9.418945294410602, 'r5': 10.06765915135798, 'r6': 8.749164118224606, 'r7': 7.458272060530009}
rv.MACHINES = ['m0', 'fixer0', 'fixer1']
rv.REPAIR_BOT = []

rv.OBJECTS = ['o0', 'o1', 'o2', 'o3', 'o4', 'o5', 'o6', 'o7', 'o8', 'o9', 'o10', 'o11', 'o12', 'o13', 'o14', 'o15', 'o16', 'o17', 'o18', 'o19', 'o20', 'o21', 'o22', 'o23', 'o24', 'o25', 'o26', 'o27', 'o28', 'o29', 'o30', 'o31', 'o32', 'o33']
rv.OBJ_WEIGHT = {'o0': 7.19172704269862, 'o1': 4.078505360144229, 'o2': 8.180731292302191, 'o3': 8.72438184441382, 'o4': 6.0795588759046595, 'o5': 8.57544700000065, 'o6': 10.06765915135798, 'o7': 4.177434687028205, 'o8': 7.929451593503584, 'o9': 5.931302614574457, 'o10': 7.552217339122315, 'o11': 4.339300862635113, 'o12': 6.45626843840264, 'o13': 7.010959629301471, 'o14': 8.515362025433358, 'o15': 9.401321387830922, 'o16': 5.61288334410985, 'o17': 4.926636445547522, 'o18': 3.6248298803632166, 'o19': 4.936659837757054, 'o20': 6.346120091130716, 'o21': 5.591889019761783, 'o22': 3.3691058833674337, 'o23': 6.956695828493666, 'o24': 7.430373322649665, 'o25': 5.959409883818642, 'o26': 3.1308044420524093, 'o27': 8.37208683005904, 'o28': 8.710578763456317, 'o29': 8.805661654577074, 'o30': 6.834949042207784, 'o31': 7.740699538977252, 'o32': 6.007819151787861, 'o33': 9.35798057023033}
rv.OBJ_CLASS = {'type0': ['o0', 'o1', 'o2', 'o3', 'o4', 'o5', 'o6'], 'type1': ['o7', 'o8', 'o9', 'o10'], 'type2': ['o11', 'o12', 'o13', 'o14', 'o15'], 'type3': ['o16', 'o17', 'o18', 'o19', 'o20', 'o21'], 'type4': ['o22', 'o23', 'o24', 'o25', 'o26', 'o27'], 'type5': ['o28'], 'type6': ['o29', 'o30', 'o31', 'o32', 'o33']}

def ResetState():
    state.loc = { 'r0': 21, 'r1': 21, 'r2': 21, 'r3': 8, 'r4': 1, 'r5': 22, 'r6': 5, 'r7': 24, 'm0': 10, 'fixer0': 23, 'fixer1': 9, 'o0': UNK, 'o1': UNK, 'o2': UNK, 'o3': UNK, 'o4': UNK, 'o5': UNK, 'o6': UNK, 'o7': UNK, 'o8': UNK, 'o9': UNK, 'o10': UNK, 'o11': UNK, 'o12': UNK, 'o13': UNK, 'o14': UNK, 'o15': UNK, 'o16': UNK, 'o17': UNK, 'o18': UNK, 'o19': UNK, 'o20': UNK, 'o21': UNK, 'o22': UNK, 'o23': UNK, 'o24': UNK, 'o25': UNK, 'o26': UNK, 'o27': UNK, 'o28': UNK, 'o29': UNK, 'o30': UNK, 'o31': UNK, 'o32': UNK, 'o33': UNK,}
    state.storedLoc = {'o0': 5, 'o1': 4, 'o2': 6, 'o3': 3, 'o4': 20, 'o5': 16, 'o6': 0, 'o7': 4, 'o8': 10, 'o9': 24, 'o10': 3, 'o11': 1, 'o12': 2, 'o13': 11, 'o14': 15, 'o15': 9, 'o16': 2, 'o17': 13, 'o18': 0, 'o19': 20, 'o20': 7, 'o21': 22, 'o22': 5, 'o23': 7, 'o24': 14, 'o25': 16, 'o26': 22, 'o27': 15, 'o28': 18, 'o29': 10, 'o30': 10, 'o31': 3, 'o32': 17, 'o33': 1}
    state.load = { 'r0': NIL, 'r1': NIL, 'r2': NIL, 'r3': NIL, 'r4': NIL, 'r5': NIL, 'r6': NIL, 'r7': NIL,}
    state.busy = {"'r0'": False, "'r1'": False, "'r2'": False, "'r3'": False, "'r4'": False, "'r5'": False, "'r6'": False, "'r7'": False, "'m0'": False, "'fixer0'": False, "'fixer1'": False}
    state.numUses = {'m0': 7, 'fixer0': 15, 'fixer1': 11}
    state.var1 = {'temp': 'r1', 'temp1': 'r1'}

tasks = {
    39: [['order', 'type0', 200]],
    40: [['order', 'type0', 200]],
    54: [['order', 'type0', 200]],
    38: [['order', 'type0', 200]],
    8: [['order', 'type0', 200]],
    30: [['order', 'type0', 200]],
    49: [['order', 'type1', 200]],
    41: [['order', 'type1', 200]],
    15: [['order', 'type1', 200]],
    4: [['order', 'type1', 200]],
    52: [['order', 'type3', 200]],
    34: [['order', 'type3', 200]],
    35: [['order', 'type3', 200]],
    16: [['order', 'type3', 200]],
    2: [['order', 'type3', 200]],
    18: [['order', 'type3', 200]],
    45: [['order', 'type4', 200]],
    51: [['order', 'type4', 200]],
    11: [['order', 'type4', 200]],
    37: [['order', 'type4', 200]],
    13: [['order', 'type4', 200]],
    10: [['order', 'type4', 200]],
    7: [['order', 'type5', 200]],
    23: [['order', 'type6', 200]],
    42: [['order', 'type6', 200]],
    32: [['order', 'type6', 200]],
    43: [['order', 'type6', 200]],
    17: [['order', 'type6', 200]],
}
eventsEnv = {
}