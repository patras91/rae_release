__author__ = 'mason'
from domain_orderFulfillment import *
from timer import DURATION
from state import state
import numpy as np

def GetCostOfMove(r, loc1, loc2, dist):
    return 1 + dist

def GetCostOfLookup(item):
    return max(1, np.random.beta(2, 2))

def GetCostOfWrap(m, item):
    return max(1, np.random.normal(5, .5))

def GetCostOfPickup(r, item):
    return max(1, np.random.normal(4, 1))

def GetCostOfPutdown(r, item):
    return max(1, np.random.normal(4, 1))

def GetCostOfLoad(r, m, item):
    return max(1, np.random.normal(3, .5))

DURATION.TIME = {
    'lookupDB': GetCostOfLookup,
    'wrap': GetCostOfWrap,
    'pickup': GetCostOfPickup,
    'putdown': GetCostOfPutdown,
    'acquireRobot': 1,
    'freeRobot': 1,
    'loadMachine': GetCostOfLoad,
    'moveRobot': GetCostOfMove,
    'repair': 8,
    'wait': 1
}

DURATION.COUNTER = {
    'lookupDB': GetCostOfLookup,
    'wrap': GetCostOfWrap,
    'pickup': GetCostOfPickup,
    'putdown': GetCostOfPutdown,
    'acquireRobot': 1,
    'freeRobot': 1,
    'loadMachine': GetCostOfLoad,
    'moveRobot': GetCostOfMove,
    'repair': 8,
    'wait': 1
}

rv.LOCATIONS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 200]
rv.FACTORY1 = frozenset({0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26})
rv.FACTORY_UNION = rv.FACTORY1
rv.SHIPPING_DOC = {rv.FACTORY1: 10}

rv.GROUND_EDGES = {0: [14, 20, 22, 6, 8, 16, 17, 25, 26], 1: [9, 25, 11], 2: [8, 15, 4], 3: [16, 20, 10, 23], 4: [2, 10, 19, 12, 18], 5: [6, 17], 6: [0, 5, 9, 13, 17, 18, 19, 22], 7: [13, 18, 23], 8: [0, 10, 11, 19, 2, 9, 12, 24, 200], 9: [6, 8, 1, 17, 21], 10: [3, 18, 4, 8], 11: [1, 8, 19, 22, 24, 25, 200], 12: [4, 8, 16, 20, 22, 24], 13: [6, 17, 7, 18], 14: [16, 0], 15: [25, 2], 16: [0, 3, 12, 14], 17: [0, 5, 6, 9, 23, 13, 19], 18: [4, 6, 7, 13, 19, 26, 10], 19: [6, 11, 17, 4, 8, 18, 25], 20: [12, 0, 3, 200], 21: [9, 25], 22: [6, 11, 12, 0], 23: [3, 7, 17], 24: [8, 11, 12], 25: [0, 1, 11, 19, 15, 21, 200], 26: [0, 18], 200: [8, 11, 20, 25]}
rv.GROUND_WEIGHTS = {(0, 14): 7.401981842930434, (0, 20): 7.691694232075426, (0, 22): 12.198551128145084, (0, 6): 13.778213620828375, (0, 8): 2.9090533499120026, (0, 16): 1.9363475089778648, (0, 17): 8.581587828398122, (0, 25): 9.906716122289794, (0, 26): 12.246571721539096, (1, 9): 15.69437386381265, (1, 25): 2.794751952274276, (1, 11): 11.216674079286182, (2, 8): 7.915709424786821, (2, 15): 6.178029823965984, (2, 4): 8.40119782083115, (3, 16): 12.437739435457352, (3, 20): 7.6252447210101675, (3, 10): 7.33015716585086, (3, 23): 4.530358374284057, (4, 10): 6.7212869340589005, (4, 19): 12.74621487898408, (4, 12): 8.567001421722958, (4, 18): 8.348594978536362, (5, 6): 10.83081271298488, (5, 17): 1.813017099196168, (6, 9): 8.474200972909383, (6, 13): 11.579331422016173, (6, 17): 3.5059941962551253, (6, 18): 10.080487821816982, (6, 19): 11.932369522319643, (6, 22): 14.944273263684666, (7, 13): 8.621008766283829, (7, 18): 5.569060979134997, (7, 23): 5.88317230761228, (8, 10): 7.65917665838327, (8, 11): 6.333114565880598, (8, 19): 2.7944069086873764, (8, 9): 10.900387454993512, (8, 12): 7.384246017575589, (8, 24): 2.702277526101657, (8, 200): 8.507080584565179, (9, 17): 2.538797586216912, (9, 21): 7.2997895943068425, (10, 18): 6.099740322563163, (11, 19): 6.1629803085815436, (11, 22): 15.140760386835332, (11, 24): 4.484772734173765, (11, 25): 8.219495519777311, (11, 200): 1, (12, 16): 8.115979906384071, (12, 20): 4.289962538404483, (12, 22): 1, (12, 24): 8.504100842902911, (13, 17): 5.283885842867507, (13, 18): 1.036658593001639, (14, 16): 4.481567805274973, (15, 25): 8.737143223630701, (17, 23): 9.032104792437464, (17, 19): 11.009074292322072, (18, 19): 5.729731411164375, (18, 26): 13.038165083152158, (19, 25): 4.002927996793462, (20, 200): 12.31604873592386, (21, 25): 5.0056228488529015, (25, 200): 9.684789248063042}

rv.ROBOTS = { 'r0': rv.FACTORY1,  'r1': rv.FACTORY1,  'r2': rv.FACTORY1,  'r3': rv.FACTORY1,  'r4': rv.FACTORY1,  'r5': rv.FACTORY1,  'r6': rv.FACTORY1,  'r7': rv.FACTORY1,  'r8': rv.FACTORY1,  'r9': rv.FACTORY1, }
rv.ROBOT_CAPACITY = {'r0': 7.365018052844055, 'r1': 11.681281106817917, 'r2': 5.908047571194359, 'r3': 11.02652045876626, 'r4': 8.80542050053338, 'r5': 6.588002611829374, 'r6': 7.81824770348385, 'r7': 7.722220478602478, 'r8': 12.569916105609803, 'r9': 8.730830601414523}
rv.MACHINES = { 'm0': rv.FACTORY1,  'm1': rv.FACTORY1,  'm2': rv.FACTORY1, }
rv.REPAIR_BOT = ['fixer0']

rv.OBJECTS = ['o0', 'o1', 'o2', 'o3', 'o4', 'o5', 'o6', 'o7', 'o8', 'o9', 'o10', 'o11', 'o12', 'o13', 'o14', 'o15', 'o16', 'o17', 'o18', 'o19', 'o20']
rv.OBJ_WEIGHT = {'o0': 8.305516012178106, 'o1': 6.637477190902474, 'o2': 7.797309141109264, 'o3': 7.459343984333403, 'o4': 6.426498401372563, 'o5': 9.005844792824835, 'o6': 8.412382346101861, 'o7': 6.379651556594085, 'o8': 10.084061632925039, 'o9': 5.084737169969002, 'o10': 1.7029235707761696, 'o11': 9.242148964193465, 'o12': 7.585235474075821, 'o13': 8.909770437391579, 'o14': 7.19992138514044, 'o15': 9.095501674033192, 'o16': 6.690330364568115, 'o17': 7.125099135745504, 'o18': 4.652668391202473, 'o19': 9.296865363829047, 'o20': 8.111033948520653}
rv.OBJ_CLASS = {'type0': ['o0', 'o1', 'o2', 'o3', 'o4', 'o5', 'o6'], 'type1': ['o7', 'o8', 'o9', 'o10', 'o11'], 'type2': ['o12', 'o13', 'o14'], 'type3': ['o15', 'o16', 'o17', 'o18', 'o19', 'o20']}

def ResetState():
    state.loc = { 'r0': 17, 'r1': 26, 'r2': 25, 'r3': 14, 'r4': 3, 'r5': 22, 'r6': 10, 'r7': 18, 'r8': 15, 'r9': 20, 'm0': 8, 'm1': 19, 'm2': 13, 'fixer0': 14, 'o0': UNK, 'o1': UNK, 'o2': UNK, 'o3': UNK, 'o4': UNK, 'o5': UNK, 'o6': UNK, 'o7': UNK, 'o8': UNK, 'o9': UNK, 'o10': UNK, 'o11': UNK, 'o12': UNK, 'o13': UNK, 'o14': UNK, 'o15': UNK, 'o16': UNK, 'o17': UNK, 'o18': UNK, 'o19': UNK, 'o20': UNK,}
    state.storedLoc = {'o0': 3, 'o1': 19, 'o2': 19, 'o3': 17, 'o4': 9, 'o5': 1, 'o6': 26, 'o7': 2, 'o8': 0, 'o9': 14, 'o10': 9, 'o11': 23, 'o12': 13, 'o13': 19, 'o14': 0, 'o15': 21, 'o16': 6, 'o17': 18, 'o18': 14, 'o19': 24, 'o20': 7}
    state.load = { 'r0': NIL, 'r1': NIL, 'r2': NIL, 'r3': NIL, 'r4': NIL, 'r5': NIL, 'r6': NIL, 'r7': NIL, 'r8': NIL, 'r9': NIL, 'fixer0': False,}
    state.busy = {'r0': False, 'r1': False, 'r2': False, 'r3': False, 'r4': False, 'r5': False, 'r6': False, 'r7': False, 'r8': False, 'r9': False, 'm0': False, 'm1': False, 'm2': False, 'fixer0': False}
    state.numUses = {'m0': 9, 'm1': 7, 'm2': 6}
    state.var1 = {'temp': 'r1', 'temp1': 'r1'}

tasks = {
    12: [['order', 'type0', 200]],
    20: [['order', 'type0', 200]],
    2: [['order', 'type1', 200]],
    3: [['order', 'type1', 200]],
    7: [['order', 'type1', 200]],
    19: [['order', 'type1', 200]],
    1: [['order', 'type3', 200]],
    9: [['order', 'type3', 200]],
    15: [['order', 'type3', 200]],
    17: [['order', 'type3', 200]],
    21: [['order', 'type3', 200]],
}
eventsEnv = {
}